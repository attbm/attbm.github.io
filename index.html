<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Collapsible sidebar using Bootstrap 4</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
        integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="style/nav-sidebar.css">
    <link rel="stylesheet" href="style/layout.css">
    <style>

    </style>
</head>

<body>
    <!-- Wrapper-->
    <div class="wrapper">
        <!----------------------------- Sidebar  ---------------------------->
        <nav id="sidebar">
            <div class="sidebar-header">
                <!-- <h3>Bootstrap Sidebar</h3> -->
                <img src="img/logo.png" alt="" style="width: 100px;">
            </div>

            <ul class="list-unstyled components">
                <!-- <p>Dummy Heading</p> -->
                <li class="active">
                    <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Các
                        thuật toán sắp xếp</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu">
                        <li>
                            <a href="index.html">Bubble Sort</a>
                        </li>

                        <li>
                            <a href="insertion.html">Insertion Sort</a>
                        </li>
                        <li>
                            <a href="interchange.html">Interchange Sort</a>
                        </li>
                        <li>
                            <a href="selection.html">Selection Sort</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="about.html">Giới thiệu</a>
                </li>
                <li>
                    <a href="guide.html">Hướng dẫn</a>
                </li>
                <!-- <li>
                    <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false"
                        class="dropdown-toggle">Pages</a>
                    <ul class="collapse list-unstyled" id="pageSubmenu">
                        <li>
                            <a href="#">Page 1</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li> -->
                <!-- <li>
                    <a href="#">Portfolio</a>
                </li> -->
                <li>
                    <a href="#">Liên hệ</a>
                </li>
            </ul>

            <ul class="list-unstyled CTAs">
                <li>
                    <a href="https://bootstrapious.com/tutorial/files/sidebar.zip" class="download">Download source</a>
                </li>
                <!-- <li>
                    <a href="https://bootstrapious.com/p/bootstrap-sidebar" class="article">Back to article</a>
                </li> -->
            </ul>
        </nav>
        <!----------------------------- END Sidebar  ---------------------------->

        <!-----------------------Page Content  ------------------------------->
        <div id="content">

            <nav class="navbar">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i>
                    </button>
                    <h6>Thuật toán nổi bọt - Bubble Sort</h6>
                    <h6></h6>
                    <!-- <ul class="nav ml-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">Page</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Page</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Page</a>
                        </li>

                    </ul> -->

                </div>

            </nav> <!-- End navbarr-->

            <!-- Layout -->
            <div class="container " id="box-container">
                <div class="row mx-auto flex-md-row-reverse">

                    <div class="col-md-6 custom-box">
                        <div class="box-content" id="controls-container">
                            <!-- <div class="container" id="controls-container"> -->
                            <div class="part part-1" style="position: relative;">
                                <div class="controls_row">
                                    <div class="mr-2">
                                        <label for="rbt_random">Ngẫu nhiên</label>
                                        <input type="radio" name="mode" id="rbt_random">
                                    </div>

                                    <div>
                                        <label for="numElements" class="ml-0">Số Lượng:</label>
                                        <select id="numElements">
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                            <option value="7">7</option>
                                            <option value="8">8</option>
                                            <option value="9">9</option>
                                            <option value="10">10</option>
                                        </select>
                                    </div>
                                    <div>
                                        <input type="button" value="GO" class="mybtn" id="btn_go">
                                    </div>

                                </div>
                                <div class="controls_row">
                                    <div class="mr-2">
                                        <label for="rbt_from_input">Nhập tay:&nbsp;&nbsp;&nbsp; </label>
                                        <input type="radio" name="mode" id="rbt_from_input">
                                    </div>
                                    <div>
                                        <input type="text" name="" id="array_input" style="width: 230px;">
                                    </div>
                                    <div style="margin: auto;">

                                    </div>
                                </div>
                            </div>
                            <div class="part part-2" id="animation_container" style="position: relative;">

                            </div>
                            <div class="part part-3">
                                <div class="flex-center mt-3">
                                    <button id="btnPlay">PLAY</button>
                                    <button id="btnPause">PAUSE</button>
                                    <button id="btnNext">NEXT</button>
                                </div>
                            </div>
                            <!-- </div> -->
                        </div>
                    </div>
                    <!-- Box hiển thị mã nguồn -->
                    <div class="col-md-6 custom-box">
                        <div class="box-content">
                            <div class="controls_row" style="width: 100%; background-color: #ccc;">
                                <div class="mr-4 mt-1">
                                    <input type="radio" name="language" id="rbt_c" checked>
                                    <label for="rbt_c">C/C++</label>
                                </div>
                                <div class="mr-4">
                                    <input type="radio" name="language" id="rbt_csharp">
                                    <label for="rbt_csharp">C#</label>
                                </div>
                                <div class="mr-4">
                                    <input type="radio" name="language" id="rbt_js">
                                    <label for="rbt_js">Javascript</label>
                                </div>
                            </div>
                            <img src="img/bubblesort/c.png" alt="" class="img_source">
                        </div>
                    </div>
                    <!-- Hết box hiển thị mã nguồn -->
                </div>
                <div class="row mx-auto">

                    <div class="col-md-6 custom-box">
                        <div class="box-content">
                            <img src="img/bubblesort/bubblesort.jpg" alt="" class="diagram">
                        </div>
                    </div>

                    <div class="col-md-6 custom-box">
                        <div class="box-content scrollable-div">
                            <div>
                                <h6>Ý tưởng:</h6>
                            </div>
                            <div>Ý tưởng thuật toán cũng giống như việc xếp hàng trong giờ thể dục. Thầy giáo thể dục
                                muốn xếp các bạn trong lớp thành một hàng theo thứ tự từ thấp đến cao, thầy so sánh
                                chiều cao của
                                bạn học sinh đứng cạnh nhau trong hàng, nếu bạn bên phải thấp hơn bạn bên trái thì đổi
                                chỗ
                                bạn cho nhau</div>
                            <div>
                                Với cách sắp xếp không giảm từ trái qua phải, mục đích của chúng ta là đưa dần các số
                                lớn nhất về cuối dãy (ngoài cùng bên phải).
                            </div>
                            <div>
                                Bắt đầu từ vị trí số 1, xét lần lượt từng cặp phần tử, nếu phần tử bên phải nhỏ hơn phần
                                tử bên trái, ta sẽ thực hiện đổi chỗ phần tử này, nếu không, xét tiếp cặp tiếp theo. Với
                                cách làm như vậy, phần tử nhỏ hơn sẽ "nổi" lên, còn phần tử lớn hơn sẽ "chìm" dần và về
                                bên phải.
                            </div>
                            <div>
                                Khi kết thúc vòng thứ nhất, ta sẽ đưa được phần tử lớn nhất về cuối dãy. Sang vòng thứ
                                hai, ta tiếp tục bắt đầu ở vị trí đầu tiên như vậy và đưa được phần tử lớn thứ hai về vị
                                trí thứ hai ở cuối dãy ...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="text-center">
                <div>Sản phẩm của tập thể giảng viên khoa CNTT - KẾ TOÁN</div>
                <div>Trường CAO ĐẲNG ĐẮK LẮK</div>
                <div>Địa chỉ: 594 Lê Duẩn, Tp. Buôn Ma Thuột, Đắk Lắk</div>
            </footer>
            <!-- End layout -->


        </div>
        <!-----------------------END Page Content  ------------------------------->
    </div><!-- End Wrapper-->

    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
        integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
        crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
        integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
        crossorigin="anonymous"></script>
    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>
    <script src="js/array.js"></script>

    <script>
        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
                // Khởi tạo CustomArray và chạy mô phỏng Bubble Sort

            });
            $('#rbt_c').on('click', function () {
                $(".img_source").attr("src", "img/bubblesort/c.png");
            });
            $('#rbt_csharp').on('click', function () {
                $(".img_source").attr("src", "img/bubblesort/csharp.png");
            });
            $('#rbt_js').on('click', function () {
                $(".img_source").attr("src", "img/bubblesort/js.png");
            });


            const values = [5, 3, 1, 4, 2];
            const animationContainer = $('#animation_container');
            const customArray = new CustomArray(animationContainer, values);
            var isPaused = true;
            var isRunning = false;
            var myInterval;
            // Sử dụng hàm bubbleSortSteps khi nút "Run" được nhấn
            $('#btnPlay').on('click', function () {
                console.log('Play clicked');
                isPaused = false;
                if(!isRunning)
                {
                    bubbleSort(customArray);
                    isRunning = true;
                }
            });
             $('#btnPause').on('click', function () {
                console.log('Pause clicked');
                isPaused = true;
            });

            async function bubbleSort(customArray) {
                const n = customArray.values.length;
                for (let i = 0; i < n - 1; i++) {
                    // Di chuyển pointer_i và pointer_j tới vị trí hiện tại của i và j
                    const moveIPromise = new Promise(resolve => {
                        // Thực hiện swapAnimation
                        customArray.movePointer_i(i).then(() => {
                            // Gọi resolve khi animation hoàn thành
                            myInterval = setInterval(function () {
                                if(!isPaused){
                                    clearInterval(myInterval);
                                    console.log('await hoàn thành');
                                    console.log('Is paused' + isPaused);
                                    resolve();
                                }
                            }, 2000);
                        });
                    });
                    // Chờ đợi swapPromise hoàn thành trước khi tiếp tục
                    await moveIPromise;
                    for (let j = 0; j < n - i - 1; j++) {
                        // Di chuyển pointer_i và pointer_j tới vị trí hiện tại của i và j
                        const moveJPromise = new Promise(resolve => {
                            // Thực hiện swapAnimation
                            customArray.movePointer_j(j).then(() => {
                                // Gọi resolve khi animation hoàn thành
                                myInterval = setInterval(function () {
                                    if(!isPaused){
                                        clearInterval(myInterval);
                                        console.log('await hoàn thành');
                                        console.log('Is paused' + isPaused);
                                        resolve();
                                    }
                                }, 2000);
                            });
                        });
                        // Chờ đợi swapPromise hoàn thành trước khi tiếp tục
                        await moveJPromise;

                        // So sánh giá trị và thực hiện swapAnimation
                        if (customArray.arrayItems[j].value > customArray.arrayItems[j + 1].value) {
                            // Sử dụng Promise để chờ đợi animation hoàn thành
                            const swapPromise = new Promise(resolve => {
                                // Thực hiện swapAnimation
                                customArray.swapAnimation(j, j + 1).then(() => {
                                    // Gọi resolve khi animation hoàn thành
                                    console.log('await hoàn thành');
                                    resolve();
                                });
                            });

                            // Chờ đợi swapPromise hoàn thành trước khi tiếp tục
                            await swapPromise;
                        }
                    }
                }
            }
        });
    </script>
</body>

</html>